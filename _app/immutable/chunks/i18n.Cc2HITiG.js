import{B as N,C as k,D as q,F as Y}from"./disclose-version.Dv-B70xr.js";import{y as K,Y as X,Z,_ as G,g as L,s as H,z as Q,M as F,$ as J,m as V}from"./runtime.Dxd9X7SM.js";import{b as P,g as tt}from"./entry.ZDur7Ckg.js";import{p as et}from"./stores.DHcme6AC.js";import{r as nt}from"./runtime.DhlVoqcY.js";function bt(t,n,e,a){var E;var o=(e&k)!==0,i=(e&q)!==0,c=(e&Y)!==0,s=t[n],r=(E=K(t,n))==null?void 0:E.set,u=a,d=!0,f=()=>(c&&d&&(d=!1,u=Q(a)),u);s===void 0&&a!==void 0&&(r&&i&&X(),s=f(),r&&r(s));var l;if(i)l=()=>{var h=t[n];return h===void 0?f():(d=!0,h)};else{var g=(o?F:J)(()=>t[n]);g.f|=Z,l=()=>{var h=L(g);return h!==void 0&&(u=void 0),h===void 0?u:h}}if(!(e&N))return l;if(r){var w=t.$$legacy;return function(h,v){return arguments.length>0?((!i||!v||w)&&r(v?l():h),h):l()}}var _=!1,p=V(s),m=F(()=>{var h=l(),v=L(p);return _?(_=!1,v):p.v=h});return o||(m.equals=G),function(h,v){var O=L(m);if(arguments.length>0){const I=v?L(m):h;return m.equals(I)||(_=!0,H(p,I),L(m)),h}return O}}function rt(t,n){if(t==="")return"";const e=new URL(t,n).pathname;return e.endsWith("/")?e.slice(0,-1):e}function R(t,n){const e=st(t),a=at(e,n),[o,i]=it(a);return[o,i]}const D=(t,n,e)=>[n,t,e??""].filter(a=>a!=="/").join("")||"/";function at(t,n){const e=t.replace(n,"");return e.startsWith("/")?e:`/${e}`}function it(t){const e=["/.html__data.json","/__data.json"].find(a=>t.endsWith(a));return e?[t.slice(0,-e.length)||"/",e]:[t,void 0]}function st(t){try{return decodeURI(t)}catch{return t}}const ot=t=>({url:n})=>{try{const[e,a]=R(n.pathname,P),o=t.getLanguageFromLocalisedPath(e);if(!o)return n.pathname;const i=t.getCanonicalPath(e,o);return D(i,P,a)}catch{return n.pathname}};function ct(t){return`/${t.split("/").filter(Boolean).join("/")}`}function ut(t){const n=t.map(e=>typeof e=="string"?a=>a===e:a=>e.test(a));return e=>n.some(a=>a(ct(e)))}const $="rtl",y="ltr";function ft(t){try{const n=new Intl.Locale(t);return"textInfo"in n?n.textInfo.direction===$?$:y:n.getTextInfo().direction===$?$:y}catch{return y}}function lt(t){const n=t.map(e=>[e,ft(e)]);return Object.fromEntries(n)}const dt=0,W=1,T=2,ht=4,x=0,S=1,B=2;function mt(t){const n=pt(_t);return t.sort((e,a)=>{var o,i,c,s,r,u;const d=A(e).map(n),f=A(a).map(n);for(let l=0;l<Math.max(d.length,f.length);l+=1){const g=d[l],w=f[l];if(!g)return-1;if(!w)return 1;for(let _=0;_<Math.max(g.length,w.length);_+=1){const p=g[_],m=w[_];if((p==null?void 0:p[x])||(m==null?void 0:m[x])){if(!p)return-1;if(!m)return 1;const h=((o=g[_+1])==null?void 0:o[S])||((c=(i=d[l+1])==null?void 0:i[0])==null?void 0:c[S]),v=((s=w[_+1])==null?void 0:s[S])||((u=(r=f[l+1])==null?void 0:r[0])==null?void 0:u[S]),O=h&&v,I=h&&!v,C=!h&&v;if((p[x]&&m[x])===T){if(O)continue;if(I)return-1;if(C)return 1}if(p[x]===T)return I?-1:1;if(m[x]===T)return C?1:-1;if(p[B]!==m[B])return(-1)**+p[B];if(p[x]!==m[x])return(-1)**+(p[x]>m[x])}else if((p==null?void 0:p[S])!==(m==null?void 0:m[S]))return gt(p[S],m[S])}}return e<a?1:-1})}function pt(t){const n=new Map;return e=>(n.has(e)||n.set(e,t(e)),n.get(e))}function _t(t){const n=[];let e=0;for(;e<=t.length;){const a=t.indexOf("[",e),o=a===-1;if(n.push([dt,t.slice(e,o?void 0:a),!1]),o)break;const i=t[a+1]==="["?W:t[a+1]==="."?T:ht,c=i===W?"]]":"]",s=t.indexOf(c,a);if(s===-1)throw new Error(`Invalid route definition ${t}`);const r=t.slice(a,e=s+c.length);n.push([i,r,r.includes("=")])}return n}const A=t=>t.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function gt(t,n){if(t===n)return 0;let e=0;for(;t[e]===n[e];)e++;return t[e]?n[e]?t[e]<n[e]?-1:1:-1:1}const vt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function xt(t){const n=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${U(t).map(a=>{const o=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(a);if(o)return n.push({name:o[1],matcher:o[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const i=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(a);if(i)return n.push({name:i[1],matcher:i[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!a)return;const c=a.split(/\[(.+?)\](?!\])/);return"/"+c.map((r,u)=>{if(u%2){if(r.startsWith("x+"))return b(String.fromCharCode(parseInt(r.slice(2),16)));if(r.startsWith("u+"))return b(String.fromCharCode(...r.slice(2).split("-").map(_=>parseInt(_,16))));const d=vt.exec(r);if(!d)throw new Error(`Invalid param: ${r}`);const[,f,l,g,w]=d;return n.push({name:g,matcher:w,optional:!!f,rest:!!l,chained:l?u===1&&c[0]==="":!1}),l?"(.*?)":f?"([^/]*)?":"([^/]+?)"}return b(r)}).join("")}).join("")}/?$`),params:n}}function wt(t,n,e){const a={},o=t.slice(1),i=o.filter(s=>s!==void 0);let c=0;for(const[s,r]of n.entries()){let u=o[s-c];if(r.chained&&r.rest&&c&&(u=o.slice(s-c,s+1).filter(f=>f).join("/"),c=0),u===void 0){r.rest&&(a[r.name]="");continue}if(r.matcher&&!e[r.matcher])return;if((e[r.matcher]??(()=>!0))(u)){a[r.name]=u;const f=n[s+1],l=o[s+1];f&&!f.rest&&f.optional&&l&&r.chained&&(c=0),!f&&!l&&Object.keys(a).length===i.length&&(c=0);continue}if(r.optional&&r.chained){c++;continue}return}if(!c)return a}function b(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const St=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function z(t,n){return"/"+U(t).map(e=>e.replace(St,(a,o,i,c)=>{const s=n[c];if(!s){if(o||i&&s!==void 0)return"";throw new Error(`Missing parameter '${c}' in route ${t}`)}if(s[0]=="/"||s.endsWith("/"))throw new Error(`Parameter '${c}' in route ${t} cannot start or end with a slash`);return s})).filter(Boolean).join("/")}function M(t,n,e){const a=mt(n);for(const o of a){const i=xt(o),c=i.pattern.exec(It(t));if(!c)continue;const s=wt(c,i.params,e);if(s)return{params:s,id:o}}}const It=t=>t.endsWith("/")?t.slice(0,-1):t,U=t=>t.slice(1).split("/");function Lt(t,n,e,a,o){function i(r){const d=r.split("/")[1];if(t.includes(d)&&(o==="always"||d!==n))return d;if(o==="never")return n}function c(r,u){const d=r.endsWith("/")&&r!=="/";r=d?r.slice(0,-1):r;let f=$t(r,u,e,a);return d&&(f+="/"),(o==="always"||u!==n)&&(f=`/${u}${f}`),f}function s(r,u){const d=r.endsWith("/")&&r!=="/";(o==="always"||u!==n)&&(r=r.replace(`/${u}`,"")||"/");const f=d;r=f?r.slice(0,-1):r;let l=Pt(r,u,e,a);return f&&(l+="/"),l}return{getLanguageFromLocalisedPath:i,getLocalisedPath:c,getCanonicalPath:s}}function Pt(t,n,e,a){for(const[o,i]of Object.entries(e)){if(!(n in i))continue;const c=i[n];if(!c)continue;const s=M(t,[c],a);if(s)return z(o,s.params)}return t}function $t(t,n,e,a){const o=M(t,Object.keys(e),a);if(!o)return t;const i=e[o.id];if(!i)return t;const c=i[n];return c?z(c,o.params):t}function Rt(t,n){const e={},a=[],o=t.sourceLanguageTag,i={defaultLanguageTag:o,runtime:t,translations:e,matchers:{},exclude:ut(a),prefixDefaultLanguage:"never",textDirection:lt(t.availableLanguageTags),seo:{noAlternateLinks:!1}},c=Lt(t.availableLanguageTags,o,i.translations,i.matchers,i.prefixDefaultLanguage);return Object.freeze(e),Object.freeze(i),{config:i,strategy:c,reroute:()=>ot(c),handle:()=>{throw new Error("")},getLanguageFromUrl(s){const r=j(P),[u]=R(s.pathname,r);return i.exclude(u)?i.defaultLanguageTag:c.getLanguageFromLocalisedPath(u)||i.defaultLanguageTag},resolveRoute(s,r=void 0){if(i.exclude(s))return s;const u=j(P),[d,f]=R(s,u);if(r=r??t.languageTag(),!s.startsWith(u))return s;const l=c.getLocalisedPath(d,r);return D(l,u,f)},route(s){const r=j(P),[u,d]=R(s,r),l=c.getLanguageFromLocalisedPath(u)||i.defaultLanguageTag,g=c.getCanonicalPath(u,l);return D(g,r,d)}}}function j(t){return t===""?"":t.startsWith("/")?t:rt(t,new URL(tt(et).url))}const jt=Rt(nt);export{R as a,jt as i,rt as n,bt as p,D as s};
